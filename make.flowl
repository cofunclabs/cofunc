load "go:print"
load "go:command"

run print {
	"STARING" : "build \"cofunc\""
}

run print {
	"go build" : "starting to run ..."
}
run gobuild

run print {
	"go test" : "starting to run ..."
}
run unittest

run print {
	"END" : "build \"cofunc\""
}

fn gobuild = command {
	args = {
		"script" : "go build -o bin/flowl github.com/cofunclabs/cofunc/cmd/flowl"
	}
}

fn unittest = command {
	args = {
		"script" : "
			go test -v -timeout 30s github.com/cofunclabs/cofunc
			go test -v -timeout 30s github.com/cofunclabs/cofunc/internal/std/command
			go test -v -timeout 30s github.com/cofunclabs/cofunc/internal/functiondriver/go"
	}
}
